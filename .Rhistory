levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_07) / saar$GR8E.2002.KDE
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_07) / saar$GR9E.2003.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2007.KDE / saar$GR8E.2002.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2007.KDE / saar$GR9E.2003.KDE
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_07) / saar$GR8E.2002.KDE
names (gr)
Gr.8.Cohort.KDE
names (afgr)
Gr.8.Cohort.KDE <- as.integer (afgr$Grad.w.Diploma.in.4.years.2007.KDE) / saar$GR8E.2002.KDE
Gr.9.Cohort.KDE <- as.integer (afgr$Grad.w.Diploma.in.4.years.2007.KDE) / saar$GR9E.2003.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2007.KDE / saar$GR8E.2002.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2007.KDE / saar$GR9E.2003.KDE
tot.2007 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
tot.2007 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2007
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2007 <- cbind (tot.2007, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#2006
District <- index
Year <-rep (2006, 168)
Tot.Enrollment.saar <- saar$TOTAL.2006.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2006.07
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2006.07) /
as.integer (elsi$Total.Students..UG.PK.12...District..2006.07)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_06) / saar$GR8E.2001.KDE
names (gr)
Gr.8.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2006.KDE) / saar$GR8E.2001.KDE
Gr.9.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2006.KDE) / saar$GR9E.2002.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2006.KDE / saar$GR8E.2001.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2006.KDE / saar$GR9E.2002.KDE
tot.2006 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2006
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2006 <- cbind (tot.2006, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
District <- index
Year <-rep (2005, 168)
Tot.Enrollment.saar <- saar$TOTAL.2005.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2005.06
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2005.06) /
as.integer (elsi$Total.Students..UG.PK.12...District..2005.06)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
names (gr)
Gr.8.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2005.KDE) / saar$GR8E.2000.KDE
Gr.9.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2005.KDE) / saar$GR9E.2001.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2005.KDE / saar$GR8E.2000.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2005.KDE / saar$GR9E.2001.KDE
tot.2005 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2005
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2005 <- cbind (tot.2005, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#2004
District <- index
Year <-rep (2004, 168)
Tot.Enrollment.saar <- saar$TOTAL.2004.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2004.05
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2005.06) /
as.integer (elsi$Total.Students..UG.PK.12...District..2005.06) ##wrong years!! Data imputation?
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
names (gr)
Gr.8.Cohort.KDE <- as.integer (gr$gr$Grad.w.Diploma.in.4.years.2004.KDE) / saar$GR8E.1999.KDE
Gr.8.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2004.KDE) / saar$GR8E.1999.KDE
Gr.9.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2004.KDE) / saar$GR9E.2000.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2004.KDE / saar$GR8E.1999.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2004.KDE / saar$GR9E.2000.KDE
tot.2004 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2004
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2004 <- cbind (tot.2004, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#2003
District <- index
Year <-rep (2003, 168)
Tot.Enrollment.saar <- saar$TOTAL.2003.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2003.04
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2005.06) /
as.integer (elsi$Total.Students..UG.PK.12...District..2005.06) ##wrong years!! Data imputation?
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- rep (NA, 168) #no saar$GR8E.1998
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_03) / saar$GR9E.1999.KDE
Gr.9.Cohort.KDE <- as.integer (gr$Grad.w.Diploma.in.4.years.2003.KDE) / saar$GR9E.1999.KDE
Gr.12.Gr.8.ratio.KDE <- rep (NA, 168) #no saar$GR8E.1998
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2003.KDE / saar$GR9E.1999.KDE
tot.2003 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2003
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2003 <- cbind (tot.2003, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Gr.8.Cohort.KDE, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.9.ratio.KDE)
names (saar)
Tot.Enrollment.saar <- saar$TOTAL.2013.KDE
Tot.Enrollment.elsi <- rep (NA, 168)
names (frd)
FRD.Lunch.Pct <- frd$FRD_LUNCH_PCT                   #taken from 2012-2013 KDE school report card
FRD.Decile <- cut_number(FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
names (agrc)
cum.2003.2012 <- rbind (tot.2012, tot.2011, tot.2010, tot.2009, tot.2008, tot.2007,
tot.2006, tot.2005, tot.2004, tot.2003)
#Save as R object to load in later script
cumulative <- paste (wd, "objects", "cum.2003.2012.csv", sep = "/")
write.table (cum.2003.2012, file = cumulative, sep = ",")
?rm
rm(list=ls())
wd <- getwd()
file <- paste (wd, "data sets", "ELSI_csv_export_6353406681986067459539.csv", sep = "/")
wd <- getwd()
file <- paste (wd, "data sets", "ELSI_csv_export_6353406681986067459539.csv", sep = "/")
gr <- read.csv (file, header = T, sep = ",", strip.white = T, skip = 6, nrow = 51,
colClasses = "character")
View(gr)
#set to integer
for (i in 2:ncol (gr)){
gr[,i] <- as.integer (gr [, i])
}
#eliminate NAs
begin.states <- gr[,1]
apply(gr, 2, function(x) length(which(is.na(x))))
gr <- gr[,1:30]  #25 NAs in column 31
gr <- gr[complete.cases(gr[, 1:30]), ]
remain.states <- gr [,1]
exclude <- setdiff (begin.states, remain.states) #DC, NY, PN, SC, WI excluded
#shorten variable names
names (gr) <- sub("Grade", "Gr", names (gr))
names (gr) <- sub ("Diploma", "Dipl", names (gr))
names (gr) <- sub ("State", "", names (gr))
names (gr) <- sub ("Students", "Stud", names (gr))
names (gr) <- sub ("Recipients", "Reci", names (gr))
names (gr) <- gsub ("..", ".", names (gr), fixed = T)
names (gr) <- gsub ("..", ".", names (gr), fixed = T)
names (gr) <- gsub ("..", ".", names (gr), fixed = T)
names (gr) <- gsub ("..", ".", names (gr), fixed = T)
#total columns
total <- colSums (gr[,2:ncol (gr)], na.rm = T)
total <- as.data.frame (total)
total <- t (total)
total <-as.data.frame (total)
Gr.8.C.National.2009.10 <- total$Dipl.Reci.2009.10 / total$Gr.8.Stud.2004.05
Gr.8.C.National.2008.09 <- total$Dipl.Reci.2008.09 / total$Gr.8.Stud.2003.04
Gr.8.C.National.2007.08 <- total$Dipl.Reci.2007.08 / total$Gr.8.Stud.2002.03
Gr.8.C.National.2006.07 <- total$Dipl.Reci.2006.07 / total$Gr.8.Stud.2001.02
Gr.8.C.National.2005.06 <- total$Dipl.Reci.2005.06 / total$Gr.8.Stud.2000.01
Gr.8.C.National.2004.05 <- total$Dipl.Reci.2004.05 / total$Gr.8.Stud.1999.00
Gr.8.C.National.2003.04 <- total$Dipl.Reci.2003.04 / total$Gr.8.Stud.1998.99
Gr.8.C.National.2002.03 <- total$Dipl.Reci.2002.03 / total$Gr.8.Stud.1997.98
Nat.Grad.Rate <- cbind (Gr.8.C.National.2002.03,   Gr.8.C.National.2003.04,
Gr.8.C.National.2004.05,   Gr.8.C.National.2005.06,   Gr.8.C.National.2006.07, Gr.8.C.National.2007.08,
Gr.8.C.National.2008.09,   Gr.8.C.National.2009.10)
Nat.Grad.Rate <- as.data.frame (t(Nat.Grad.Rate))
Year <- (2002:2009)
Nat.Grad.Rate <- cbind (Year, Nat.Grad.Rate)
a <- Nat.Grad.Rate$Year
a <- as.character (a)
a <- as.Date (a, "%Y")
Nat.Grad.Rate$Year <- a
names (Nat.Grad.Rate)[2] <- "Gr.8.Cohort.National"
#write object out
file <- paste (wd, "objects", "Nat.Gr.8.Cohort.2002.2009.csv", sep = "/")
write.csv (Nat.Grad.Rate, file = file)
}
rm(list=ls())
#compare CCD data to KDEdata
# 4 plots
wd <- getwd()
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2012.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2012.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2013.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
elsi <- elsi [, c(1, grep ("Grade.8", names (elsi)))]
elsi <- elsi [, c(1, 16:2)]
elsi <- elsi [, c(-2, -3)]
saar <- saar[, c(1, grep ("GR8E", names (saar)))]
elsi[2:14] <- sapply (elsi[2:14], as.integer)
names (elsi) <- gsub("Students..Public.School..", "", names(elsi))
Year <- 1999:2012
Grade.8.elsi <- as.array (colSums (elsi[2:14], na.rm = T))
Grade.8.elsi <- c(Grade.8.elsi, NA)
Grade.8.saar <- as.array (colSums (saar [2:15], na.rm = T))
Diff <- Grade.8.saar - Grade.8.elsi
new <- as.data.frame (cbind (Year, Grade.8.saar, Grade.8.elsi, Diff))
#Plot 8th Grade enrollment from CCD to KDE SAAR Report
library (ggplot2)
p1 <- ggplot(new, aes (Year, Grade.8.elsi))
p1 <- p1 + geom_line()
p1 <- p1 + ggtitle ("Kentucky Eighth Grade Enrollments") + ylab ("Students") + xlab ("Year")
p1 <- p1 + ylim (25000, 75000)
p1 <- p1 + scale_x_continuous (breaks = seq(from = 1999, to = 2012, by = 2))
p1 <- p1 + geom_line (aes (Year, Grade.8.saar), colour = "red")
p1 <- p1 + annotate ("text", x = 2011.5, y = 53000, label = "SAAR", colour = "red")
p1 <- p1 + annotate ("text", x = 2011.5, y = 48000, label = "CCD", colour = "black")
p1
#Compare 9th Grade enrollment from CCD to KDE SAAR Report
wd <- getwd()
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2013.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
elsi <- elsi [, c(1, grep ("Grade.9", names (elsi)))]
elsi <- elsi [, c(1, 16:2)]
elsi <- elsi [, c(-2, -3)]
saar <- saar[, c(1, grep ("GR9E", names (saar)))]
elsi[2:14] <- sapply (elsi[2:14], as.integer)
nces <- c(colSums (elsi [2:14], na.rm = T), NA)
kde <- colSums (saar [2:15], na.rm = T)
Year <- c(1999:2012)
Diff <- kde - nces
new <- as.data.frame (cbind (Year, kde, nces, Diff))
#plot
p1 <- ggplot (new, aes (Year, nces))
p1 <- p1 + geom_line()
p1 <- p1 + geom_line (aes (Year, kde), colour = "red")
p1 <- p1 + ylim (25000, 75000)
p1 <- p1 + scale_x_continuous (breaks = seq(from = 1999, to = 2012, by = 2))
p1 <- p1 + ggtitle ("Kentucky Ninth Grade Enrollments") + ylab ("Students")
p1 <- p1 + annotate ("text", x = 2011.5, y = 57000, label = "SAAR", colour = "red")
p1 <- p1 + annotate ("text", x = 2011, y = 50000, label = "CCD", colour = "black")
p1
#compare diploma recipients
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2003.2007.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
get(wd)
getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2002.2006.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
afgr <- read.csv (paste (wd, "objects", "afgr.07.11.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
elsi <- elsi[, c(1,grep ("Diploma.Recipients", names (elsi)))]
elsi <- elsi [, c(1, 24:2)]
names (elsi) <- gsub (".Recipients.......District.", "", names (elsi))
elsi <- elsi[, c(1, 19:24)]
elsi[, 2:7] <- sapply (elsi [,2:7], as.integer)
elsi <- colSums (elsi[,2:7], na.rm = T)
elsi[3] <- trunc((elsi[2] + elsi[4])/2, 0)
nces <- c(elsi, rep (NA, 4))
afgr <- colSums (afgr[2:6])
gr <- colSums (gr[3:7], na.rm = T)
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2002.2006.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
afgr <- read.csv (paste (wd, "objects", "afgr.07.11.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
agrc <- read.csv (paste (wd, "objects", "agrc.12.csv", sep = "/"),
sep = ",", header = T, as.is = T)
elsi <- elsi[, c(1,grep ("Diploma.Recipients", names (elsi)))]
elsi <- elsi [, c(1, 24:2)]
names (elsi) <- gsub (".Recipients.......District.", "", names (elsi))
elsi <- elsi[, c(1, 19:24)]
elsi[, 2:7] <- sapply (elsi [,2:7], as.integer)
elsi <- colSums (elsi[,2:7], na.rm = T)
elsi[3] <- trunc((elsi[2] + elsi[4])/2, 0)
nces <- c(elsi, rep (NA, 4))
afgr <- colSums (afgr[2:6])
gr <- colSums (gr[3:7], na.rm = T)
View(agrc)
agrc <- colSums (agrc[3], na.rm = T)
kde <- c(gr, afgr, agrc)
kde
nces
length (nces)
length (kde)
#compare diploma recipients
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2002.2006.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
afgr <- read.csv (paste (wd, "objects", "afgr.07.11.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
agrc <- read.csv (paste (wd, "objects", "agrc.12.csv", sep = "/"),
sep = ",", header = T, as.is = T)
elsi <- elsi[, c(1,grep ("Diploma.Recipients", names (elsi)))]
elsi <- elsi [, c(1, 24:2)]
names (elsi) <- gsub (".Recipients.......District.", "", names (elsi))
elsi <- elsi[, c(1, 19:24)]
elsi[, 2:7] <- sapply (elsi [,2:7], as.integer)
elsi <- colSums (elsi[,2:7], na.rm = T)
elsi[3] <- trunc((elsi[2] + elsi[4])/2, 0)
nces <- c(elsi, rep (NA, 5))
afgr <- colSums (afgr[2:6], na.rm = T)
gr <- colSums (gr[3:7], na.rm = T)
agrc <- colSums (agrc[3], na.rm = T)
kde <- c(gr, afgr, agrc)
nces
names (kde)
names (nces)
paste (a,b, sep= ",")
paste ("a", "b", sep = ",")
paste ("Diploma", 2003:2012, sep = ".")
length (2003:2012)
paste ("Diploma", 2002:2012, sep = ".")
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2002.2006.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
afgr <- read.csv (paste (wd, "objects", "afgr.07.11.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
agrc <- read.csv (paste (wd, "objects", "agrc.12.csv", sep = "/"),
sep = ",", header = T, as.is = T)
elsi <- elsi[, c(1,grep ("Diploma.Recipients", names (elsi)))]
elsi <- elsi [, c(1, 24:2)]
names (elsi) <- gsub (".Recipients.......District.", "", names (elsi))
elsi <- elsi[, c(1, 19:24)]
elsi[, 2:7] <- sapply (elsi [,2:7], as.integer)
elsi <- colSums (elsi[,2:7], na.rm = T)
elsi[3] <- trunc((elsi[2] + elsi[4])/2, 0)
nces <- c(NA, elsi, rep (NA, 4))
afgr <- colSums (afgr[2:6], na.rm = T)
gr <- colSums (gr[3:7], na.rm = T)
agrc <- colSums (agrc[3], na.rm = T)
kde <- c(gr, afgr, agrc)
kde
nces
paste ("Diploma", 2002:2012, sep = ".")
length (paste ("Diploma", 2002:2012, sep = "."))
length (nces)
names (nces) <- paste ("Diploma", 2002:2012, sep = ".")
nces
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2002.2006.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
afgr <- read.csv (paste (wd, "objects", "afgr.07.11.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
agrc <- read.csv (paste (wd, "objects", "agrc.12.csv", sep = "/"),
sep = ",", header = T, as.is = T)
elsi <- elsi[, c(1,grep ("Diploma.Recipients", names (elsi)))]
elsi <- elsi [, c(1, 24:2)]
names (elsi) <- gsub (".Recipients.......District.", "", names (elsi))
elsi <- elsi[, c(1, 19:24)]
elsi[, 2:7] <- sapply (elsi [,2:7], as.integer)
elsi <- colSums (elsi[,2:7], na.rm = T)
elsi[3] <- trunc((elsi[2] + elsi[4])/2, 0)
nces <- c(NA, elsi, rep (NA, 4))
afgr <- colSums (afgr[2:6], na.rm = T)
gr <- colSums (gr[3:7], na.rm = T)
agrc <- colSums (agrc[3], na.rm = T)
kde <- c(gr, afgr, agrc)
nces
names (nces) <- paste ("Diploma", 2002:2012, sep = ",")
nces
names (nces) <- paste ("Diploma", 2002:2012, sep = ".")
nces
kde
diff <- kde - nces
diff
Year <- 2002:2012
new <- as.data.frame (cbind (Year, kde, nces, diff))
#compare diploma recipients
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2002.2006.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
afgr <- read.csv (paste (wd, "objects", "afgr.07.11.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
agrc <- read.csv (paste (wd, "objects", "agrc.12.csv", sep = "/"),
sep = ",", header = T, as.is = T)
elsi <- elsi[, c(1,grep ("Diploma.Recipients", names (elsi)))]
elsi <- elsi [, c(1, 24:2)]
names (elsi) <- gsub (".Recipients.......District.", "", names (elsi))
elsi <- elsi[, c(1, 19:24)]
elsi[, 2:7] <- sapply (elsi [,2:7], as.integer)
elsi <- colSums (elsi[,2:7], na.rm = T)
elsi[3] <- trunc((elsi[2] + elsi[4])/2, 0)
nces <- c(NA, elsi, rep (NA, 4))
names (nces) <- paste ("Diploma", 2002:2012, sep = ".")
afgr <- colSums (afgr[2:6], na.rm = T)
gr <- colSums (gr[3:7], na.rm = T)
agrc <- colSums (agrc[3], na.rm = T)
kde <- c(gr, afgr, agrc)
diff <- kde - nces
Year <- 2002:2012
new <- as.data.frame (cbind (Year, kde, nces, diff))
#new$Year <- as.Date (as.character (new$Year), "%Y")
p1 <- ggplot (new, aes (Year, kde))
p1 <- p1 + geom_line(colour = "red")
p1 <- p1 + ylim (25000, 75000)
p1 <- p1 + scale_x_continuous (limits = c(2001, 2015), breaks = seq (from = 1999, to = 2015, by = 2))
p1 <- p1 + geom_line (aes(Year, nces), colour = "black")
p1 <- p1 + ylab ("Reg. Diplomas") + ggtitle ("Kentucky Diploma Recipients")
p1 <- p1 + annotate ("text", x = 2008, y = 44000, label = "CCD", colour = "black")
p1 <- p1 + annotate ("text", x = 2012, y = 39000, label = "KDE", colour = "red")
p1
# compare saar ratio to common core ratio
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr <- read.csv (paste (wd, "objects", "gr.2003.2007.csv", sep = "/" ),
sep = ",", header = T, as.is = T)
setwd("~/Desktop/SAAR_Data")
?merge
## use character columns of names to get sensible sort order
authors <- data.frame(
surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
nationality = c("US", "Australia", "US", "UK", "Australia"),
deceased = c("yes", rep("no", 4)))
books <- data.frame(
name = I(c("Tukey", "Venables", "Tierney",
"Ripley", "Ripley", "McNeil", "R Core")),
title = c("Exploratory Data Analysis",
"Modern Applied Statistics ...",
"LISP-STAT",
"Spatial Statistics", "Stochastic Simulation",
"Interactive Data Analysis",
"An Introduction to R"),
other.author = c(NA, "Ripley", NA, NA, NA, NA,
"Venables & Smith"))
(m1 <- merge(authors, books, by.x = "surname", by.y = "name"))
(m2 <- merge(books, authors, by.x = "name", by.y = "surname"))
stopifnot(as.character(m1[, 1]) == as.character(m2[, 1]),
all.equal(m1[, -1], m2[, -1][ names(m1)[-1] ]),
dim(merge(m1, m2, by = integer(0))) == c(36, 10))
## "R core" is missing from authors and appears only here :
merge(authors, books, by.x = "surname", by.y = "name", all = TRUE)
## example of using 'incomparables'
x <- data.frame(k1 = c(NA,NA,3,4,5), k2 = c(1,NA,NA,4,5), data = 1:5)
y <- data.frame(k1 = c(NA,2,NA,4,5), k2 = c(NA,NA,3,4,5), data = 1:5)
merge(x, y, by = c("k1","k2")) # NA's match
merge(x, y, by = "k1") # NA's match, so 6 rows
merge(x, y, by = "k2", incomparables = NA) # 2 rows
surname = c("Tukey", "Venables", "Tierney", "Ripley", "McNeil"),
nationality = c("US", "Australia", "US", "UK", "Australia"),
deceased = c("yes", rep("no", 4)))
authors <- data.frame
surname = c("Tukey", "Venables", "Tierney", "Ripley", "McNeil"),
authors <- data.frame
surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
?I
authors <- data.frame(
surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
nationality = c("US", "Australia", "US", "UK", "Australia"),
deceased = c("yes", rep("no", 4)))
books <- data.frame(
setwd("~/Desktop/merge")
authors <- data.frame(
authors <- data.frame(
surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
nationality = c("US", "Australia", "US", "UK", "Australia"),
deceased = c("yes", rep("no", 4)))
books <- data.frame(
name = I(c("Tukey", "Venables", "Tierney",
"Ripley", "Ripley", "McNeil", "R Core")),
title = c("Exploratory Data Analysis",
"Modern Applied Statistics ...",
"LISP-STAT",
"Spatial Statistics", "Stochastic Simulation",
"Interactive Data Analysis",
"An Introduction to R"),
a <- 1
