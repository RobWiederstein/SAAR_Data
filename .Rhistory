#Take child poverty indicator
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"),
sep = ",",
header = T)
attach (cp)
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1,2,4)]
detach (cp)
index <- elsi[, c(1,3)]
View(index)
View(cp.2011)
?sub
index[,2] <- sub("County", "", index[,2])
View(index)
names(index)
a <- index [,2]
a
a <- sub (" COUNTY", "", a)
a
index[,2] <- a
index[,2]
View(index)
toupper(cp.2011[,2])
toupper(cp.2011[,1])
cp.2011[,1] <- toupper(cp.2011[,1])
View(cp.2011)
cp.2011 <- cp.2011 [, c(2,1,3)]
View(cp.2011)
setdiff (index[,2], cp.2011[,2])
setdiff (cp.2011[,2], index[,2])
t <- merge (index, cp.2011)
b <- names(index)[2]
b
names(cp.2011)
names(cp.2011)[2] <- b
t <- merge (index, cp.2011)
View(t)
merge (cp.2011, index)
t <- merge (cp.2011, index)
View(t)
View(t)
head (index)
t <- merge (index, cp.2011)
t
wd <- getwd()
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2012.csv", sep = "/"),
sep = ",", header = T)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
#really small schools with 8 grade enrollment, but no 12th grade
#probably why they are missing on the afgr data
exclude.schools <- saar [DISTRICT == "Anchorage Independent" |
DISTRICT == "East Bernstadt Independent" |
DISTRICT == "Science Hill Independent"  |
DISTRICT == "Southgate Independent" |
DISTRICT == "West Point Independent",]
#fix new index so lengths of data frames are equal
index <- as.data.frame (afgr$DISTRICT)
names (index) <- "DISTRICT"
elsi <- merge (index, elsi)
saar <- merge (index, saar)
District <- index
Year <- rep (2011, 169)
Tot.Enrollment.saar <- saar$TOTAL.2011.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2011.12
Gr.8.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2011.KDE / saar$GR8E.2006.KDE
Gr.8.Cohort.NCES <- afgr$Grad.w.Diploma.in.4.years.2011.KDE / elsi$Grade.8.Students..Public.School..2006.07
Gr.9.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2011.KDE / saar$GR9E.2007.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2011.KDE / saar$GR8E.2006.KDE
Gr.12.Gr.8.ratio.NCES <- as.integer (elsi$Grade.12.Students..Public.School..2011.12) /
as.integer (elsi$Grade.8.Students..Public.School..2006.07)
FRD.Lunch.Pct <-  as.numeric (tot$Total.Free.and.Reduced.Lunch.Students..Public.School..2011.12) /
as.numeric(tot$Total.Students..UG.PK.12...District..2011.12)
tot.2011 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
Gr.8.Cohort.KDE, Gr.8.Cohort.NCES, Gr.9.Cohort.KDE,
Gr.12.Gr.8.ratio.KDE, Gr.12.Gr.8.ratio.NCES
)
View(tot.2011)
View(t)
t <- t[,c(2,4)]
View(t)
tot.2011 <- merge (tot.2011, t)
View(tot.2011)
plot (t$Gr.8.Cohort.KDE, t$Data)
t$Gr.8.Cohort.KDE
names (t)
plot (tot.2011$Gr.8.Cohort.KDE, tot.2011$Data)
plot (tot.2011$Data, tot.2011$Gr.8.Cohort.KDE)
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1,2,4)]
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"), sep = ",", header = T)
attach (cp)
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1,2,4)]
detach (cp)
View(cp.2011)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1,2,4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1,2,4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1,2,4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1,2,4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1,2,4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1,2,4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1,2,4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1,2,4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1,2,4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1,2,4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1,2,4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1,2,4)]
tot.cp.2000.2012 <- cbind (paste(cp,2000:2012, sep = "."))
View(tot.cp.2000.2012)
paste(cp,2000:2012, sep = ".")
paste("cp",2000:2012, sep = ".")
tot.cp.2000.2012 <- cbind (paste("cp",2000:2012, sep = "."))
tot.cp.2000.2012 <- cbind (get (paste("cp",2000:2012, sep = ".")))
tot.cp.2000.2012 <- cbind (get (paste("cp",2001:2012, sep = ".")))
tot.cp.2000.2012 <- cbind (sapply(paste("cp",2001:2012, sep = "."), get)
)
View(tot.cp.2000.2012)
tot.cp.2000.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012)
length (2001:2012)
View(tot.cp.2000.2012)
tot.cp.2000.2012 <- merge (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
View(cp.2001)
View(cp.2001)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1, 4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1, 4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1, 4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1, 4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1, 4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1, 4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1, 4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1, 4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1, 4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1, 4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1, 4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1, 4)]
View(cp.2001)
tot.cp.2000.2012 <- merge (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012)
tot.cp.2000.2012 <- merge (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012, by.x =
Location)
tot.cp.2000.2012 <- merge (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012, by =
Location)
tot.cp.2000.2012 <- merge (cp.2001, cp.2002, by = Location)
View(cp.2001)
?merge
intersect (names(cp.2001, cp.2002))
intersect (names(cp.2001), names(cp.2002))
tot.cp.2000.2012 <- merge (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012)
tot.cp.2000.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012)
View(tot.cp.2000.2012)
View(tot.cp.2000.2012)
seq(2:20, by = 2)
?seq
seq (from = 2, to = 20, by = 2)
tot.cp.2000.2012 <- tot.cp.2000.2012[, c(1, seq (from = 2, to = 20, by = 2))]
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2000.2012[, c(1, seq (from = 2, to = 20, by = 2))]
2001:20012
2001:2012
length (2001:2012)
names (tot.cp.2001.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 20, by = 2))]
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2009, cp.2010, cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 20, by = 2))]
names (tot.cp.2001.2012)
paste ("cp", 2001:2012, "AEC", sep = ".")
length (paste ("cp", 2001:2012, "AEC", sep = "."))
#Take child poverty indicator
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"), sep = ",", header = T)
attach (cp)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1, 4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1, 4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1, 4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1, 4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1, 4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1, 4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1, 4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1, 4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1, 4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1, 4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1, 4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1, 4)]
View(cp.2001)
View(cp.2012)
View(cp.2012)
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
paste ("cp", 2001:2012, "AEC", sep = ".")
names (tot.cp.2001.2012) <- c("Location", paste ("cp", 2001:2012, "AEC",
sep = ".")
)
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
length (paste ("cp", 2001:2012, "AEC", sep = "."))
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 20, by = 2))]
length (seq (from = 2, to = 20, by = 2))
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("Location", paste ("cp", 2001:2012, "AEC",
sep = "."))
detach (cp)
View(tot.cp.2001.2012)
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
tot.cp.2001.2012 <- toupper(tot.cp.2001.2012$County)
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
tot.cp.2001.2012[,1] <- toupper(tot.cp.2001.2012$County)
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
tot.cp.2001.2012[,2:13]/100
tot.cp.2001.2012 <- tot.cp.2001.2012[,2:13]/100
tot.cp.2001.2012[,2:13] <- tot.cp.2001.2012[,2:13]/100
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
tot.cp.2001.2012[,1] <- toupper(tot.cp.2001.2012$County)
tot.cp.2001.2012[,2:13] <- tot.cp.2001.2012[,2:13]/100
View(tot.cp.2001.2012)
View(tot.cp.2001.2012)
search()
detach (cp)
search ()
detach (saar)
index <- elsi[, c(1,3)]
View(index)
View(index)
names (index)
names (index)[2] <- "County"
names (index)
index [,2] <- sub (" COUNTY", "", index [,2])
View(index)
temp <- merge (index, tot.cp.2001.2012, by = County)
head (index)
head (tot.cp.2001.2012)
intersect (names(index), names (tot.cp.2001.2012))
temp <- merge (index, tot.cp.2001.2012)
View(temp)
View(temp)
temp <- merge (tot.cp.2001.2012, index)
View(temp)
temp <- temp [, c(14,1:13)]
View(temp)
View(temp)
index <- elsi[, c(1,3)]
names (index)[2] <- "County"
index [,2] <- sub (" COUNTY", "", index [,2])
temp <- merge (tot.cp.2001.2012, index)
temp <- temp [, c(14,1:13)]
View(temp)
View(temp)
tot.cp.2001.2012 <- temp
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
View(afgr)
View(afgr)
index <- afgr [,1]
index <- as.data.frame (afgr [,1])
intersect (names (index), names (tot.cp.2001.2012))
names (index)
names (index) <- "DISTRICT"
intersect (names (index), names (tot.cp.2001.2012))
temp <- merge (tot.cp.2001.2012, index)
tot.cp.2001.2012 <- merge (tot.cp.2001.2012, index)
View(tot.cp.2001.2012)
cp.new <- paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/")
write.table (tot.cp.2001.2012, file = cp.new, sep = ",")
rm (list = ls())
#build child poverty indicator
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"), sep = ",", header = T)
#change data frame to put years in columns
attach (cp)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1, 4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1, 4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1, 4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1, 4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1, 4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1, 4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1, 4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1, 4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1, 4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1, 4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1, 4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1, 4)]
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
tot.cp.2001.2012[,1] <- toupper(tot.cp.2001.2012$County)
tot.cp.2001.2012[,2:13] <- tot.cp.2001.2012[,2:13]/100
detach (cp)
#assign county poverty rates to school districts
#120 counties to 174 school districts
index <- elsi[, c(1,3)]
names (index)[2] <- "County"
index [,2] <- sub (" COUNTY", "", index [,2])
temp <- merge (tot.cp.2001.2012, index)
temp <- temp [, c(14,1:13)]
tot.cp.2001.2012 <- temp
#merge with afgr to reduce from 174 school districts
#to 169
index <- as.data.frame (afgr [,1])
tot.cp.2001.2012 <- merge
#Save as R object to load in later script
cp.new <- paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/")
write.table (tot.cp.2001.2012, file = cp.new, sep = ",")
#build child poverty indicator
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"), sep = ",", header = T)
#change data frame to put years in columns
attach (cp)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1, 4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1, 4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1, 4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1, 4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1, 4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1, 4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1, 4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1, 4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1, 4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1, 4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1, 4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1, 4)]
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
tot.cp.2001.2012[,1] <- toupper(tot.cp.2001.2012$County)
tot.cp.2001.2012[,2:13] <- tot.cp.2001.2012[,2:13]/100
detach (cp)
#assign county poverty rates to school districts
#120 counties to 174 school districts
index <- elsi[, c(1,3)]
names (index)[2] <- "County"
index [,2] <- sub (" COUNTY", "", index [,2])
temp <- merge (tot.cp.2001.2012, index)
temp <- temp [, c(14,1:13)]
tot.cp.2001.2012 <- temp
#merge with afgr to reduce from 174 school districts
#to 169
index <- as.data.frame (afgr [,1])
tot.cp.2001.2012 <- merge
#Save as R object to load in later script
cp.new <- paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/")
write.table (tot.cp.2001.2012, file = cp.new, sep = ",")
class (tot.cp.2001.2012)
tot.cp.2001.2012 <- merge (index, tot.cp.2001.2012)
#build child poverty indicator
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"), sep = ",", header = T)
#change data frame to put years in columns
attach (cp)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1, 4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1, 4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1, 4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1, 4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1, 4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1, 4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1, 4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1, 4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1, 4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1, 4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1, 4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1, 4)]
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
tot.cp.2001.2012[,1] <- toupper(tot.cp.2001.2012$County)
tot.cp.2001.2012[,2:13] <- tot.cp.2001.2012[,2:13]/100
detach (cp)
#assign county poverty rates to school districts
#120 counties to 174 school districts
index <- elsi[, c(1,3)]
names (index)[2] <- "County"
index [,2] <- sub (" COUNTY", "", index [,2])
temp <- merge (tot.cp.2001.2012, index)
temp <- temp [, c(14,1:13)]
tot.cp.2001.2012 <- temp
#merge with afgr to reduce from 174 school districts
#to 169
index <- as.data.frame (afgr [,1])
tot.cp.2001.2012 <- merge (index, tot.cp.2001.2012)
#build child poverty indicator
wd <- getwd()
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
cp <- read.csv (paste (wd, "data sets",
"Child poverty rate.csv",
sep = "/"), sep = ",", header = T)
#change data frame to put years in columns
attach (cp)
cp.2012 <- cp [Location != "Kentucky" & TimeFrame == "2012", c(1, 4)]
cp.2011 <- cp [Location != "Kentucky" & TimeFrame == "2011", c(1, 4)]
cp.2010 <- cp [Location != "Kentucky" & TimeFrame == "2010", c(1, 4)]
cp.2009 <- cp [Location != "Kentucky" & TimeFrame == "2009", c(1, 4)]
cp.2008 <- cp [Location != "Kentucky" & TimeFrame == "2008", c(1, 4)]
cp.2007 <- cp [Location != "Kentucky" & TimeFrame == "2007", c(1, 4)]
cp.2006 <- cp [Location != "Kentucky" & TimeFrame == "2006", c(1, 4)]
cp.2005 <- cp [Location != "Kentucky" & TimeFrame == "2005", c(1, 4)]
cp.2004 <- cp [Location != "Kentucky" & TimeFrame == "2004", c(1, 4)]
cp.2003 <- cp [Location != "Kentucky" & TimeFrame == "2003", c(1, 4)]
cp.2002 <- cp [Location != "Kentucky" & TimeFrame == "2002", c(1, 4)]
cp.2001 <- cp [Location != "Kentucky" & TimeFrame == "2001", c(1, 4)]
tot.cp.2001.2012 <- cbind (cp.2001, cp.2002, cp.2003, cp.2004, cp.2005,
cp.2006, cp.2007, cp.2008, cp.2009, cp.2010,
cp.2011, cp.2012)
tot.cp.2001.2012 <- tot.cp.2001.2012[, c(1, seq (from = 2, to = 24, by = 2))]
names (tot.cp.2001.2012) <- c("County", paste ("cp", 2001:2012, "AEC",
sep = "."))
tot.cp.2001.2012[,1] <- toupper(tot.cp.2001.2012$County)
tot.cp.2001.2012[,2:13] <- tot.cp.2001.2012[,2:13]/100
detach (cp)
#assign county poverty rates to school districts
#120 counties to 174 school districts
index <- elsi[, c(1,3)]
names (index)[2] <- "County"
index [,2] <- sub (" COUNTY", "", index [,2])
temp <- merge (tot.cp.2001.2012, index)
temp <- temp [, c(14,1:13)]
tot.cp.2001.2012 <- temp
index <- as.data.frame (afgr [,1])
View(index)
View(index)
names (index)[1] <- "DISTRICT"
tot.cp.2001.2012 <- merge (index, tot.cp.2001.2012)
View(tot.cp.2001.2012)
#Save as R object to load in later script
cp.new <- paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/")
write.table (tot.cp.2001.2012, file = cp.new, sep = ",")
#cleanup
rm (list = ls())
cp<- read.csv (paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/" ),
sep = ",", header = T)
wd <- getwd()
cp<- read.csv (paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/" ),
sep = ",", header = T)
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2012.csv", sep = "/"),
sep = ",", header = T)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T)
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T)
