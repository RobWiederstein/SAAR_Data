School.Dist.Child.Poverty.Decile
School.Dist.Child.Poverty.Pct
cut_number (School.Dist.Child.Poverty.Pct, n = 10)
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2012
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10"))
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2012 <- cbind (tot.2012, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
View(tot.2012)
#load all cleaned up objects for a build
#library
library (ggplot2)
#load objects
wd <- getwd()
saar <- read.csv (paste (wd, "objects", "SAAR.1999.2012.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
afgr <- read.csv (paste (wd, "objects", "afgr.08.12.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
elsi <- read.csv (paste (wd, "objects", "elsi_new.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
cp   <- read.csv (paste (wd, "objects", "tot.cp.2001.2012.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
gr   <- read.csv (paste (wd, "objects", "gr.2003.2007.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
frd  <- read.csv (paste (wd, "objects", "FRD.Lunch.Pct.2012.KDE.csv", sep = "/" ),
sep = ",", header = T, as.is = TRUE)
sdcp <- read.csv (paste (wd, "objects", "Child.Poverty.by.School.District.Census.2003.2012.csv", sep = "/"),
sep = ",", header = T, as.is = TRUE)
#really small schools with 8 grade enrollment, but no 12th grade
#probably why they are missing on the afgr data
attach (saar)
exclude.schools <- saar [DISTRICT == "Anchorage Independent" |
DISTRICT == "East Bernstadt Independent" |
DISTRICT == "Science Hill Independent"  |
DISTRICT == "Southgate Independent" |
DISTRICT == "West Point Independent",]
detach (saar)
#fix new index so lengths of data frames are equal
index <- as.data.frame (afgr$DISTRICT, stringsAsFactors = FALSE)
names (index) <- "DISTRICT"
elsi <- merge (index, elsi)
saar <- merge (index, saar)
gr <- gr[, -1]
names (gr)[1] <- "DISTRICT"
gr[161,1] <- "Walton Verona Independent" #eliminate hyphen
gr <- merge (index, gr)
frd$DISTRICT <- sub ("Raceland-Worthington Independent", "Raceland Independent", frd$DISTRICT)
frd$DISTRICT <- sub ("Walton-Verona Independent", "Walton Verona Independent", frd$DISTRICT)
frd <- merge (index, frd)
sdcp <- merge (index, sdcp)
#2012
District <- index
Year <- rep (2012, 169)
Tot.Enrollment.saar <- saar$TOTAL.2012.KDE
Tot.Enrollment.elsi <- rep (NA, 169)
FRD.Lunch.Pct <- frd$FRD_LUNCH_PCT                   #taken from KDE school report card
FRD.Decile <- cut_number(FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2012.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2012.KDE /
saar$GR8E.2007.KDE
Gr.9.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2012.KDE /
saar$GR9E.2008.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2012.KDE /
saar$GR8E.2007.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2012.KDE /
saar$GR9E.2008.KDE
tot.2012 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2012
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2012 <- cbind (tot.2012, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm  (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2011
District <- index
Year <- rep (2011, 169)
Tot.Enrollment.saar <- saar$TOTAL.2011.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2011.12
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2011.12) /
as.integer (elsi$Total.Students..UG.PK.12...District..2011.12)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n= 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2011.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2011.KDE /
saar$GR8E.2006.KDE
Gr.9.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2011.KDE /
saar$GR9E.2007.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2011.KDE /
saar$GR8E.2006.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2011.KDE /
saar$GR9E.2007.KDE
tot.2011 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2011
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2011 <- cbind (tot.2011, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm  (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2010
District <- index
Year <- rep (2010, 169)
Tot.Enrollment.saar <- saar$TOTAL.2010.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2010.11
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2010.11) /
as.integer (elsi$Total.Students..UG.PK.12...District..2010.11)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2010.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2010.KDE /
saar$GR8E.2005.KDE
Gr.9.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2010.KDE /
saar$GR9E.2006.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2010.KDE /
saar$GR8E.2005.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2010.KDE /
saar$GR9E.2006.KDE
tot.2010 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2010
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2010 <- cbind (tot.2010, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm    (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2009
District <- index
Year <-rep (2009, 169)
Tot.Enrollment.saar <- saar$TOTAL.2009.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2009.10
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2009.10) /
as.integer (elsi$Total.Students..UG.PK.12...District..2009.10)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2009.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2009.KDE /
saar$GR8E.2004.KDE
Gr.9.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2009.KDE /
saar$GR9E.2005.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2009.KDE / saar$GR8E.2004.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2009.KDE / saar$GR9E.2005.KDE
tot.2009 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2009
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2009 <- cbind (tot.2009, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm  (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2008
District <- index
Year <-rep (2008, 169)
Tot.Enrollment.saar <- saar$TOTAL.2008.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2008.09
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2008.09) /
as.integer (elsi$Total.Students..UG.PK.12...District..2008.09)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2008.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2008.KDE /
saar$GR8E.2003.KDE
Gr.9.Cohort.KDE <- afgr$Grad.w.Diploma.in.4.years.2008.KDE /
saar$GR9E.2004.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2008.KDE / saar$GR8E.2003.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2008.KDE / saar$GR9E.2004.KDE
tot.2008 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2008
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2008 <- cbind (tot.2008, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm  (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2007
District <- index
Year <-rep (2007, 169)
Tot.Enrollment.saar <- saar$TOTAL.2007.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2007.08
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2007.08) /
as.integer (elsi$Total.Students..UG.PK.12...District..2007.08)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2007.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_07) / saar$GR8E.2002.KDE
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_07) / saar$GR9E.2003.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2007.KDE / saar$GR8E.2002.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2007.KDE / saar$GR9E.2003.KDE
tot.2007 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2007
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2007 <- cbind (tot.2007, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2006
District <- index
Year <-rep (2006, 169)
Tot.Enrollment.saar <- saar$TOTAL.2006.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2006.07
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2006.07) /
as.integer (elsi$Total.Students..UG.PK.12...District..2006.07)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2006.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_06) / saar$GR8E.2001.KDE
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_06) / saar$GR9E.2002.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2006.KDE / saar$GR8E.2001.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2006.KDE / saar$GR9E.2002.KDE
tot.2006 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2006
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2006 <- cbind (tot.2006, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2005
District <- index
Year <-rep (2005, 169)
Tot.Enrollment.saar <- saar$TOTAL.2005.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2005.06
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2005.06) /
as.integer (elsi$Total.Students..UG.PK.12...District..2005.06)
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2005.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_05) / saar$GR8E.2000.KDE
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_05) / saar$GR9E.2001.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2005.KDE / saar$GR8E.2000.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2005.KDE / saar$GR9E.2001.KDE
tot.2005 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2005
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2005 <- cbind (tot.2005, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2004
District <- index
Year <-rep (2004, 169)
Tot.Enrollment.saar <- saar$TOTAL.2004.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2004.05
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2005.06) /
as.integer (elsi$Total.Students..UG.PK.12...District..2005.06) ##wrong years!! Data imputation?
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2004.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- as.integer (gr$GRADS_4YR_04) / saar$GR8E.1999.KDE
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_04) / saar$GR9E.2000.KDE
Gr.12.Gr.8.ratio.KDE <- saar$GR12E.2004.KDE / saar$GR8E.1999.KDE
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2004.KDE / saar$GR9E.2000.KDE
tot.2004 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2004
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2004 <- cbind (tot.2004, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#2003
District <- index
Year <-rep (2003, 169)
Tot.Enrollment.saar <- saar$TOTAL.2003.KDE
Tot.Enrollment.elsi <- elsi$Total.Students..UG.PK.12...District..2003.04
FRD.Lunch.Pct <-  as.integer (elsi$Total.Free.and.Reduced.Lunch.Students..Public.School..2005.06) /
as.integer (elsi$Total.Students..UG.PK.12...District..2005.06) ##wrong years!! Data imputation?
FRD.Decile <- cut_number (FRD.Lunch.Pct, n = 10)
levels (FRD.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Child.Poverty.Pct <- cp$cp.2003.AEC
Poverty.Decile <- cut_number(Child.Poverty.Pct, n = 10)
levels (Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
Gr.8.Cohort.KDE <- rep (NA, 169) #no saar$GR8E.1998
Gr.9.Cohort.KDE <- as.integer (gr$GRADS_4YR_03) / saar$GR9E.1999.KDE
Gr.12.Gr.8.ratio.KDE <- rep (NA, 169) #no saar$GR8E.1998
Gr.12.Gr.9.ratio.KDE <- saar$GR12E.2003.KDE / saar$GR9E.1999.KDE
tot.2003 <- cbind (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
#add census data
School.Dist.Child.Poverty.Pct  <- sdcp$PCT.CH.POV.5.17.2003
School.Dist.Child.Poverty.Decile <- cut_number (School.Dist.Child.Poverty.Pct, n = 10)
levels (School.Dist.Child.Poverty.Decile) <- c(paste ("D0", 1:9, sep = ""), "D10")
tot.2003 <- cbind (tot.2003, School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
rm (School.Dist.Child.Poverty.Pct, School.Dist.Child.Poverty.Decile)
#end census data
rm   (District, Year, Tot.Enrollment.saar, Tot.Enrollment.elsi,
FRD.Lunch.Pct, FRD.Decile, Child.Poverty.Pct, Poverty.Decile,
Gr.8.Cohort.KDE, Gr.9.Cohort.KDE, Gr.12.Gr.8.ratio.KDE,
Gr.12.Gr.9.ratio.KDE)
cum.2003.2012 <- rbind (tot.2012, tot.2011, tot.2010, tot.2009, tot.2008, tot.2007,
tot.2006, tot.2005, tot.2004, tot.2003)
View(cum.2003.2012)
names (cum.2003.2012)
plot (cum.2003.2012$Child.Poverty.Pct, cum.2003.2012$School.Dist.Child.Poverty.Pct)
plot (cum.2003.2012$School.Dist.Child.Poverty.Pct, cum.2003.2012$Gr.8.Cohort.KDE)
plot (cum.2003.2012$FRD.Lunch.Pct, cum.2003.2012$Gr.8.Cohort.KDE)
plot (cum.2003.2012$Child.Poverty.Pct, cum.2003.2012$Gr.8.Cohort.KDE)
plot (cum.2003.2012$Child.Poverty.Pct, cum.2003.2012$FRD.Lunch.Pct)
?pairs
pairs (cum.2003.2012)
str(cum.2003.2012)
pairs (cum.2003.2012[, c(-4,-6,-14)])
pairs (cum.2003.2012 [, c(5,7,9,10,13)])
plot (cum.2003.2012$School.Dist.Child.Poverty.Pct, cum.2003.2012$School.Dist.Child.Poverty.Pct)
#Save as R object to load in later script
cumulative <- paste (wd, "objects", "cum.2003.2012.csv", sep = "/")
write.table (cum.2003.2012, file = cumulative, sep = ",")
library ("ggplot2")
library ("ggplot2")
#Figures
wd <- getwd()
file <- paste (wd, "objects", "cum.2003.2012.csv", sep = "/")
cum <- read.csv (file, sep = ",", header = T, as.is = T)
file <- paste (wd, "objects", "State.grad.rate.2003.2012.KDE.csv", sep = "/")
ky <- read.csv (file, sep = ",", header = T, as.is = T)
file <- paste (wd, "objects", "Nat.Gr.8.Cohort.2002.2009.csv", sep = "/")
nat <- read.csv (file, sep = ",", header = T, as.is = T)
#set years to "Date" format
cum$Year <- as.Date (as.character (cum$Year), "%Y")
ky$Year <- as.Date (ky$Year)
#set up 1st and 10th deciles for comparisons
FRD.D01 <- subset (cum, cum$FRD.Decile == "D01")
FRD.D10 <- subset (cum, cum$FRD.Decile =="D10")
CP.D01 <- subset (cum, cum$Poverty.Decile=="D01")
CP.D10 <- subset (cum, cum$Poverty.Decile=="D10")
Extreme <- rbind(FRD.D01, FRD.D10)
#compare Grade 8
Gr.8.Cohort.by.year <- tapply (cum$Gr.8.Cohort.KDE, INDEX = cum$Year, FUN = mean)
Gr.8.Cohort.CP.D01 <-  tapply (CP.D01$Gr.8.Cohort.KDE, INDEX = CP.D01$Year, FUN = mean)
Gr.8.Cohort.CP.D10 <-  tapply (CP.D10$Gr.8.Cohort.KDE, INDEX = CP.D10$Year, FUN = mean)
Gr.8.Cohort.FRD.D01 <- tapply (FRD.D01$Gr.8.Cohort.KDE, INDEX = FRD.D01$Year, FUN = mean)
Gr.8.Cohort.FRD.D10 <- tapply (FRD.D10$Gr.8.Cohort.KDE, INDEX = FRD.D10$Year, FUN = mean)
#compare Grade 9
Gr.9.Cohort.by.year <- tapply (cum$Gr.9.Cohort.KDE, INDEX = cum$Year, FUN = mean)
Gr.9.Cohort.CP.D01 <- tapply (CP.D01$Gr.9.Cohort.KDE, INDEX = CP.D01$Year, FUN = mean)
Gr.9.Cohort.CP.D10 <- tapply (CP.D10$Gr.9.Cohort.KDE, INDEX = CP.D10$Year, FUN = mean)
Gr.9.Cohort.FRD.D01 <- tapply (FRD.D01$Gr.9.Cohort.KDE, INDEX = FRD.D01$Year, FUN = mean)
Gr.9.Cohort.FRD.D10 <- tapply (FRD.D10$Gr.9.Cohort.KDE, INDEX = FRD.D10$Year, FUN = mean)
table <- rbind (Gr.8.Cohort.by.year, Gr.8.Cohort.CP.D01, Gr.8.Cohort.CP.D10,
Gr.8.Cohort.FRD.D01, Gr.8.Cohort.FRD.D10, Gr.9.Cohort.by.year,
Gr.9.Cohort.CP.D01, Gr.9.Cohort.CP.D10, Gr.9.Cohort.FRD.D01,
Gr.9.Cohort.FRD.D10)
table <- as.data.frame(t(table))
Year <- row.names (table)
table <- cbind (Year, table)
table$Year <- as.Date (as.character (table$Year), "%Y")
#Save as R object to load in later script
file <- paste (wd, "objects", "summary.csv", sep = "/")
write.csv (table, file = file)
#boxplot 8th Grade by FRD lunch decile
qplot (FRD.Decile, Gr.8.Cohort.KDE, data = cum, geom = "boxplot")
qplot (FRD.Decile, Gr.9.Cohort.KDE, data = cum, geom = "boxplot")
#boxplot 8th Grade by CP decile
qplot (Poverty.Decile, Gr.8.Cohort.KDE, data = cum, geom = "boxplot")
qplot (Poverty.Decile, Gr.9.Cohort.KDE, data = cum, geom = "boxplot")
#boxplot 8th Grade Cohort by Year--Steady Progress!
qplot (Year, Gr.8.Cohort.KDE, data = cum, geom = "boxplot")
#boxplot 9th Grade Cohort by Year--Steady Progress!
qplot (Year, Gr.9.Cohort.KDE, data = cum, geom = "boxplot")
qplot (Year, Gr.8.Cohort.by.year, data = table, geom = "line", ylim = c(.60, 1), main = "Eighth Grade Cohort")
p <- ggplot (cum, aes(FRD.Lunch.Pct, Gr.8.Cohort.KDE, colour = FRD.Decile))
p <- p + layer (geom = "point")
p1 <- ggplot (table, aes (x = Year, y= Gr.8.Cohort.by.year))
table$Year <- as.Date (as.character (table$Year), "%Y")
p1 <- p1 + layer (geom = "line", colour = "red")
p1 <- p1 + ylim (c(.65, .95))
p1 <- p1 + xlab("") + ylab("Pct.") + ggtitle("Kentucky \n 8th Grade Cohort")
p1 <- p1 + geom_line (aes(Year, Gr.8.Cohort.FRD.D10))
p1 <- p1 + geom_line (aes (Year, Gr.8.Cohort.FRD.D01))
p1 <- p1 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .9, label = "D01", size = 3.5)
p1 <- p1 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .78, label = "Avg", size = 3.5, colour = "red")
p1 <- p1 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .7, label = "D10", size = 3.5)
p1
p2 <- ggplot (table, aes (x = Year, y= Gr.9.Cohort.by.year))
p2 <- p2 + layer (geom = "line", colour = "red")
p2 <- p2 + ylim (c(.55, .95))
p2 <- p2 + xlab("") + ylab("Pct.") + ggtitle("Kentucky \n 9th Grade Cohort")
p2 <- p2 + geom_line (aes(Year, Gr.9.Cohort.FRD.D10))
p2 <- p2 + geom_line (aes (Year, Gr.9.Cohort.FRD.D01))
p2 <- p2 + annotate ("text", x = as.Date (as.character (2003), "%Y"),
y = .83, label = "D01", size = 3.5)
p2 <- p2 + annotate ("text", x = as.Date (as.character (2003), "%Y"),
y = .69, label = "Avg", size = 3.5, colour = "red")
p2 <- p2 + annotate ("text", x = as.Date (as.character (2003), "%Y"),
y = .62, label = "D10", size = 3.5)
p3 <- ggplot (table, aes (x = Year, y= Gr.9.Cohort.by.year))
p3 <- p3 + layer (geom = "line", colour = "red")
p3 <- p3 + ylim (c(.65, .95))
p3 <- p3 + xlab("") + ylab("Pct.") + ggtitle("Kentucky \n 8th vs. 9th Grade Cohort")
p3 <- p3 + geom_line (aes(Year, Gr.8.Cohort.by.year ))
p3 <- p3 + annotate ("text", x = as.Date (as.character (2003), "%Y"),
y = .69, label = "9th", size = 3.5, colour = "red")
p3 <- p3 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .78, label = "8th", size = 3.5)
p4 <- ggplot (table, aes (x = Year, y= Gr.8.Cohort.by.year))
table$Year <- as.Date (as.character (table$Year), "%Y")
p4 <- p4 + layer (geom = "line", colour = "red")
p4 <- p4 + ylim (c(.65, .95))
p4 <- p4 + xlab("") + ylab("Pct.") + ggtitle("Kentucky \n 8th Grade Cohort vs. State Reported")
p4 <- p4 + geom_line (aes(ky$Year, ky$Reported))
p4 <- p4 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .84, label = "Reported", size = 3.5, colour = "black")
p4 <- p4 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .78, label = "8th", size = 3.5, colour = "red")
#add column to table for national eighth grade cohort rate
Gr.8.Cohort.National <- nat[2:8, 3]
Gr.8.Cohort.National <- c(Gr.8.Cohort.National, NA, NA, NA)
table <- cbind (table, Gr.8.Cohort.National)
table$Year <- as.Date (as.character (table$Year), "%Y")
p5 <- ggplot (table, aes (x = Year, y= Gr.8.Cohort.by.year))
p5 <- p5 + layer (geom = "line", colour = "red")
p5 <- p5 + ylim (c(.65, .95))
p5 <- p5 + xlab("") + ylab("Pct.") + ggtitle("National vs. Kentucky \n 8th Grade Cohort")
p5 <- p5 + geom_line (aes(table$Year, table$Gr.8.Cohort.National))
p5 <- p5 + annotate ("text", x = as.Date (as.character (2003), "%Y"),
y = .81, label = "USA", size = 3.5, colour = "black")
p5 <- p5 + annotate ("text", x = as.Date (as.character (2004), "%Y"),
y = .77, label = "KY", size = 3.5, colour = "red")
p2
p3
p4
p5
p6
